// Language switching functionality
// Default language: Traditional Chinese (zh-HK)

const translations = {
    'zh-HK': {
        // Navigation
        'nav.about': '關於我們',
        'nav.services': '我們的服務',
        'nav.individual': '個人服務',
        'nav.school': '學校服務',
        'nav.corporate': '企業服務',
        'nav.news': '新聞發佈',
        'nav.support': '支持我們',
        'nav.contact': '查詢服務',
        
        // Carousel
        'carousel.slide1.title': 'ZebraGo 流動精神健康及共融服務車',
        'carousel.slide1.text1': '服務學校及企業，建構共融環境及精神健康空間',
        'carousel.slide1.text2': '高度客製化方案，結合沉浸式科技、多感官體驗與專業治療',
        'carousel.slide1.button': '了解更多',
        'carousel.slide2.title': '百變空間 高度客製化',
        'carousel.slide2.text1': '車廂可變間隔設計，提供私密安靜的治療環境',
        'carousel.slide2.text2': '靈活配合不同機構需求，量身訂造專屬服務方案',
        'carousel.slide2.button': '認識我們',
        'carousel.slide3.title': '守護學校及企業團隊身心靈健康',
        'carousel.slide3.text1': '為學校師生、企業員工及照顧者提供全方位支援',
        'carousel.slide3.text2': '高度客製化方案，以 ICE 手法打造沉浸式、協作式、體驗式服務',
        'carousel.slide3.button': '立即預約',
        
        // Stats
        'stats.title': 'ZebraGo 流動服務車 為學校及企業提供專業精神健康及共融支援',
        'stats.schools': '服務學校',
        'stats.students': '累計受惠學生',
        'stats.treatments': '治療項目',
        'stats.hours': '沉浸式體驗時數',
        'stats.hoursUnit': '小時',
        
        // Sections
        'section.partners': '合作夥伴',
        'section.services': '我們的服務',
        'section.support': '支持我們',
        'section.news': '新聞發佈',
        
        // Services
        'service.mentalHealth': '全方位 4R<br>精神健康系列',
        'service.inclusion': '全方位<br>共融系列',
        'service.training': '百變練功房<br>專業訓練系列',
        
        // Support
        'support.donation': '愛心捐獻',
        'support.products': '周邊產品',
        'support.join': '加入我們',
        
        // Footer
        'footer.privacy': '私隱聲明',
        'footer.ip': '保護知識產權',
        'footer.disclaimer': '免責條款',
        'footer.copyright': '版權聲明',
        'footer.contact': '聯絡我們',
        
        // News
        'news.title': 'ZebraGo 流動車：高度客製化的流動精神健康服務',
        'news.intro': 'ZebraGo 是一輛專為學校及企業設計的流動服務車，可直接駛入校園或企業場所提供服務。車廂採用創新的可變間隔設計，能靈活分隔為兩個獨立訓練室，同時為不同使用者提供私密、安靜的治療環境。我們提供高度客製化的服務方案，可根據不同機構的需求量身訂造專屬計劃。',
        'news.tech.title': '沉浸式科技配合專業治療',
        'news.tech.content': '車內配備先進的沉浸式技術，結合多感官體驗、靜觀及表達藝術元素。我們的專業團隊包括語言治療師、職業治療師及遊戲治療師，為學校的學童提供語言治療、職業治療及遊戲治療等一對一或小組訓練，同時亦為企業員工提供壓力管理、團隊建設及心理健康支援服務。所有服務方案均可高度客製化，靈活配合不同機構的特定需求。',
        'news.sdg.title': '回應可持續發展目標',
        'news.sdg.content': 'ZebraGo 流動服務車致力回應聯合國可持續發展目標，透過流動服務模式推動共融教育及企業社會責任，為學校及企業提供可持續的精神健康支援方案。',
        'news.readMore': '查看更多',
        
        // Common
        'button.learnMore': '了解更多',
        'button.contact': '聯絡我們'
    },
    'zh-CN': {
        // Navigation
        'nav.about': '关于我们',
        'nav.services': '我们的服务',
        'nav.individual': '个人服务',
        'nav.school': '学校服务',
        'nav.corporate': '企业服务',
        'nav.news': '新闻发布',
        'nav.support': '支持我们',
        'nav.contact': '查询服务',
        
        // Carousel
        'carousel.slide1.title': 'ZebraGo 流动精神健康及共融服务车',
        'carousel.slide1.text1': '服务学校及企业，建构共融环境及精神健康空间',
        'carousel.slide1.text2': '高度客制化方案，结合沉浸式科技、多感官体验与专业治疗',
        'carousel.slide1.button': '了解更多',
        'carousel.slide2.title': '百变空间 高度客制化',
        'carousel.slide2.text1': '车厢可变间隔设计，提供私密安静的治疗环境',
        'carousel.slide2.text2': '灵活配合不同机构需求，量身订造专属服务方案',
        'carousel.slide2.button': '认识我们',
        'carousel.slide3.title': '守护学校及企业团队身心灵健康',
        'carousel.slide3.text1': '为学校师生、企业员工及照顾者提供全方位支援',
        'carousel.slide3.text2': '高度客制化方案，以 ICE 手法打造沉浸式、协作式、体验式服务',
        'carousel.slide3.button': '立即预约',
        
        // Stats
        'stats.title': 'ZebraGo 流动服务车 为学校及企业提供专业精神健康及共融支援',
        'stats.schools': '服务学校',
        'stats.students': '累计受惠学生',
        'stats.treatments': '治疗项目',
        'stats.hours': '沉浸式体验时数',
        'stats.hoursUnit': '小时',
        
        // Sections
        'section.partners': '合作伙伴',
        'section.services': '我们的服务',
        'section.support': '支持我们',
        'section.news': '新闻发布',
        
        // Services
        'service.mentalHealth': '全方位 4R<br>精神健康系列',
        'service.inclusion': '全方位<br>共融系列',
        'service.training': '百变练功房<br>专业训练系列',
        
        // Support
        'support.donation': '爱心捐献',
        'support.products': '周边产品',
        'support.join': '加入我们',
        
        // Footer
        'footer.privacy': '隐私声明',
        'footer.ip': '保护知识产权',
        'footer.disclaimer': '免责条款',
        'footer.copyright': '版权声明',
        'footer.contact': '联络我们',
        
        // News
        'news.title': 'ZebraGo 流动车：高度客制化的流动精神健康服务',
        'news.intro': 'ZebraGo 是一辆专为学校及企业设计的流动服务车，可直接驶入校园或企业场所提供服务。车厢采用创新的可变间隔设计，能灵活分隔为两个独立训练室，同时为不同使用者提供私密、安静的治疗环境。我们提供高度客制化的服务方案，可根据不同机构的需求量身订造专属计划。',
        'news.tech.title': '沉浸式科技配合专业治疗',
        'news.tech.content': '车内配备先进的沉浸式技术，结合多感官体验、静观及表达艺术元素。我们的专业团队包括语言治疗师、职业治疗师及游戏治疗师，为学校的学童提供语言治疗、职业治疗及游戏治疗等一对一或小组训练，同时亦为企业员工提供压力管理、团队建设及心理健康支援服务。所有服务方案均可高度客制化，灵活配合不同机构的特定需求。',
        'news.sdg.title': '回应可持续发展目标',
        'news.sdg.content': 'ZebraGo 流动服务车致力回应联合国可持续发展目标，透过流动服务模式推动共融教育及企业社会责任，为学校及企业提供可持续的精神健康支援方案。',
        'news.readMore': '查看更多',
        
        // Common
        'button.learnMore': '了解更多',
        'button.contact': '联络我们'
    },
    'en': {
        // Navigation
        'nav.about': 'About Us',
        'nav.services': 'Our Services',
        'nav.individual': 'Individual Services',
        'nav.school': 'School Services',
        'nav.corporate': 'Corporate Services',
        'nav.news': 'News',
        'nav.support': 'Support Us',
        'nav.contact': 'Inquiry Service',
        
        // Carousel
        'carousel.slide1.title': 'ZebraGo Mobile Mental Health and Inclusion Service Vehicle',
        'carousel.slide1.text1': 'Serving schools and enterprises, building inclusive environments and mental health spaces',
        'carousel.slide1.text2': 'Highly customized solutions combining immersive technology, multi-sensory experiences and professional therapy',
        'carousel.slide1.button': 'Learn More',
        'carousel.slide2.title': 'Flexible Space, Highly Customized',
        'carousel.slide2.text1': 'Variable compartment design provides private and quiet therapy environments',
        'carousel.slide2.text2': 'Flexibly adapts to different institutional needs, tailor-made service plans',
        'carousel.slide2.button': 'Get to Know Us',
        'carousel.slide3.title': 'Protecting the Physical and Mental Health of School and Corporate Teams',
        'carousel.slide3.text1': 'Providing comprehensive support for school teachers and students, corporate employees and caregivers',
        'carousel.slide3.text2': 'Highly customized solutions using ICE approach to create immersive, collaborative, and experiential services',
        'carousel.slide3.button': 'Book Now',
        
        // Stats
        'stats.title': 'ZebraGo Mobile Service Vehicle Providing Professional Mental Health and Inclusion Support for Schools and Enterprises',
        'stats.schools': 'Schools Served',
        'stats.students': 'Total Beneficiaries',
        'stats.treatments': 'Treatment Programs',
        'stats.hours': 'Immersive Experience Hours',
        'stats.hoursUnit': 'hours',
        
        // Sections
        'section.partners': 'Partners',
        'section.services': 'Our Services',
        'section.support': 'Support Us',
        'section.news': 'News',
        
        // Services
        'service.mentalHealth': 'Comprehensive 4R<br>Mental Health Series',
        'service.inclusion': 'Comprehensive<br>Inclusion Series',
        'service.training': 'Flexible Training Room<br>Professional Training Series',
        
        // Support
        'support.donation': 'Donations',
        'support.products': 'Merchandise',
        'support.join': 'Join Us',
        
        // Footer
        'footer.privacy': 'Privacy Statement',
        'footer.ip': 'Intellectual Property Protection',
        'footer.disclaimer': 'Disclaimer',
        'footer.copyright': 'Copyright Statement',
        'footer.contact': 'Contact Us',
        
        // News
        'news.title': 'ZebraGo Mobile Vehicle: Highly Customized Mobile Mental Health Services',
        'news.intro': 'ZebraGo is a mobile service vehicle designed for schools and enterprises, capable of directly entering campuses or corporate premises to provide services. The interior features an innovative variable partition design, allowing it to be flexibly divided into two independent training rooms, providing private and quiet therapeutic environments for different users. We offer highly customized service solutions, tailoring exclusive plans according to the specific needs of different organizations.',
        'news.tech.title': 'Immersive Technology Combined with Professional Treatment',
        'news.tech.content': 'The vehicle is equipped with advanced immersive technology, combining multi-sensory experiences, mindfulness, and expressive arts elements. Our professional team includes speech therapists, occupational therapists, and play therapists, providing one-on-one or group training such as speech therapy, occupational therapy, and play therapy for school children. Simultaneously, we offer stress management, team building, and mental health support services for corporate employees. All service solutions are highly customizable, flexibly adapting to the specific needs of different organizations.',
        'news.sdg.title': 'Responding to Sustainable Development Goals',
        'news.sdg.content': 'The ZebraGo mobile service vehicle is committed to responding to the United Nations Sustainable Development Goals, promoting inclusive education and corporate social responsibility through its mobile service model, and providing sustainable mental health support solutions for schools and enterprises.',
        'news.readMore': 'Read More',
        
        // Common
        'button.learnMore': 'Learn More',
        'button.contact': 'Contact Us'
    }
};

// Language switcher class
class LanguageSwitcher {
    constructor() {
        this.currentLang = localStorage.getItem('preferred-language') || 'zh-HK';
        this.init();
    }
    
    init() {
        // Set up language switch buttons with simple click handlers
        const engButton = document.querySelector('.lang-switch');
        const simpleChineseButton = document.querySelector('.simple-chinese');
        const traditionalChineseButton = document.querySelector('.traditional-chinese');
        
        if (engButton) {
            engButton.addEventListener('click', (e) => {
                e.preventDefault();
                this.switchLanguage('en');
            });
        }
        
        if (simpleChineseButton) {
            simpleChineseButton.addEventListener('click', (e) => {
                e.preventDefault();
                this.switchLanguage('zh-CN');
            });
        }
        
        if (traditionalChineseButton) {
            traditionalChineseButton.addEventListener('click', (e) => {
                e.preventDefault();
                this.switchLanguage('zh-HK');
            });
        }
        
        // Apply saved language on page load
        this.applyLanguage(this.currentLang);
    }
    
    switchLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('preferred-language', lang);
        this.applyLanguage(lang);
    }
    
    applyLanguage(lang) {
        // Update HTML lang attribute
        document.documentElement.lang = lang;
        
        // Update page title if it has a data-lang-title attribute
        const titleElement = document.querySelector('[data-lang-title]');
        if (titleElement) {
            document.title = titleElement.getAttribute(`data-lang-title-${lang}`) || document.title;
        }
        
        // Translate all elements with data-lang attribute
        document.querySelectorAll('[data-lang]').forEach(element => {
            const key = element.getAttribute('data-lang');
            if (translations[lang] && translations[lang][key]) {
                element.textContent = translations[lang][key];
            }
        });
        
        // Translate elements with data-lang-html (for HTML content)
        document.querySelectorAll('[data-lang-html]').forEach(element => {
            const key = element.getAttribute('data-lang-html');
            if (translations[lang] && translations[lang][key]) {
                element.innerHTML = translations[lang][key];
            }
        });
        
        // Update language switch button visibility/state
        this.updateLanguageButtons(lang);
    }
    
    updateLanguageButtons(lang) {
        // Get the 3 original buttons
        const engButton = document.querySelector('.lang-switch[data-lang-switch="en"]');
        const simpleChineseButton = document.querySelector('.simple-chinese[data-lang-switch="zh-CN"]');
        const traditionalChineseButton = document.querySelector('.traditional-chinese[data-lang-switch="zh-HK"]');
        
        // Show/hide based on current language - always show the 2 that are NOT current
        if (engButton) {
            engButton.style.display = (lang === 'en') ? 'none' : '';
        }
        if (simpleChineseButton) {
            simpleChineseButton.style.display = (lang === 'zh-CN') ? 'none' : '';
        }
        if (traditionalChineseButton) {
            traditionalChineseButton.style.display = (lang === 'zh-HK') ? 'none' : '';
        }
    }
    
    getCurrentLanguage() {
        return this.currentLang;
    }
    
    getTranslation(key) {
        return translations[this.currentLang]?.[key] || key;
    }
}

// Initialize language switcher when DOM is ready
let languageSwitcher;

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        languageSwitcher = new LanguageSwitcher();
    });
} else {
    languageSwitcher = new LanguageSwitcher();
}

// Export for use in other scripts
if (typeof module !== 'undefined' && module.exports) {
    module.exports = LanguageSwitcher;
}
